<!DOCTYPE html>
<html>
<head>
    <title>UK Weather Data API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .header { text-align: center; color: #333; margin-bottom: 30px; }
        .section { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        .btn { padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .data { margin: 10px 0; }
        #results { background: #fff; border: 1px solid #ddd; padding: 15px; border-radius: 4px; max-height: 400px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌤️ UK Weather Data API</h1>
            <p>FarmSetu Assessment - Weather Data Dashboard</p>
        </div>

        <div class="section">
            <h3>📊 Quick Stats</h3>
            <div class="data">
                <span>Total Records: <span id="recordCount">Loading...</span></span>
            </div>
        </div>

        <div class="section">
            <h3>🔗 API Endpoints</h3>
            <div class="data">
                <button class="btn" onclick="fetchData('/api/')">API Overview</button>
                <button class="btn" onclick="fetchData('/api/weather/')">Weather Data</button>
                <button class="btn" onclick="fetchData('/api/regions/')">Regions</button>
                <button class="btn" onclick="fetchData('/api/parameters/')">Parameters</button>
            </div>
        </div>

        <div class="section">
            <h3>📈 Data Visualization</h3>
            <div class="data">
                <button class="btn" onclick="fetchData('/api/weather/?region=UK')">UK Data</button>
                <button class="btn" onclick="fetchData('/api/weather/?parameter=Tmax')">Temperature Data</button>
                <button class="btn" onclick="fetchData('/api/weather/?year=2023')">2023 Data</button>
            </div>
        </div>

        <div class="section">
            <h3>📋 Results</h3>
            <div id="results">Click any button above to see API responses...</div>
        </div>
    </div>

    <script>
        // Load record count on page load
        fetch('/api/weather/')
            .then(response => response.json())
            .then(data => {
                document.getElementById('recordCount').textContent = data.count || data.length || 'N/A';
            })
            .catch(error => {
                document.getElementById('recordCount').textContent = 'Error loading';
            });

        // Fetch and display API data
        function fetchData(url) {
            document.getElementById('results').innerHTML = 'Loading...';
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('results').innerHTML = 
                        '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                })
                .catch(error => {
                    document.getElementById('results').innerHTML = 
                        '<div style="color: red;">Error: ' + error.message + '</div>';
                });
        }
    </script>
</body>
</html>
